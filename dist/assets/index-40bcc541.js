(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class h{#e;#t=0;#r=0;constructor(){this.#e=[0,0,0]}#i(){this.#e=[Math.floor(Math.random()*(this.#r-this.#t+1))+this.#t,Math.floor(Math.random()*(this.#r-this.#t+1))+this.#t,Math.floor(Math.random()*(this.#r-this.#t+1))+this.#t]}generateRandomColor(){return this.#t=0,this.#r=255,this.#i(),this.#e=this.#h(this.#e),this.#e}generateLightColor(){return this.#t=155,this.#r=255,this.#i(),this.#n(),this.#e=this.#h(this.#e),this.#e}#o(){return!(this.#e[0]<200&&this.#e[1]<200&&this.#e[2]<200)}#n(){if(!this.#o())for(let e=0;e<this.#e.length;e++)this.#e[e]=this.#e[e]+10}generateDarkColor(){return this.#t=0,this.#r=100,this.#i(),this.#l(),this.#e=this.#h(this.#e),this.#e}#s(){return!(this.#e[0]>50&&this.#e[1]>50&&this.#e[2]>50)}#l(){if(!this.#s())for(let e=0;e<this.#e.length;e++)this.#e[e]=this.#e[e]-10}#h(e){return"rgb("+e.join(", ")+")"}}class a{#e;constructor(){this.#e=[]}generateMonochromaticColorScheme(e){this.#s(e);for(let t=0;t<2;t++){let r;t===0?r=this.#r(e):t===1&&(r=this.#i(e)),this.#e.push(r)}return this.#e}#t(e){e=e.split("(")[1].split(")")[0].split(",");const t=[];for(let r=0;r<e.length;r++){let s=parseInt(e[r]);t.push(s)}return t}#r(e){const t=this.#t(e),r=Math.random()*.5+.5,s=[];for(let n=0;n<t.length;n++){let o=t[n]+(255-t[n])*r;o=Math.min(255,Math.max(0,o)),s.push(Math.round(o))}return`rgb(${s[0]}, ${s[1]}, ${s[2]})`}#i(e){const t=this.#t(e),r=Math.random()*.5-.5,s=[];for(let n=0;n<t.length;n++){let o=t[n]-(0-t[n])*r;o=Math.min(255,Math.max(0,o)),s.push(Math.round(o))}return"rgb("+s.join(", ")+")"}generateAnalogousColorScheme(e){this.#s(e);for(let t=0;t<2;t++){let r;t===0?r=this.#o(e):r=this.#n(e),this.#e.push(r)}return this.#e}#o(e){const t=this.#t(e);let r=t[0],s=t[1],i=t[2];for(let n=0;n<t.length;n++)r>s&&r>i&&(s=s+20),s>r&&s>i&&(i=i+20),i>r&&i>s&&(r=r+20);return e="rgb("+r+", "+s+", "+i+")",e}#n(e){const t=this.#t(e);let r=t[0],s=t[1],i=t[2];for(let n=0;n<t.length;n++)r>s&&r>i&&(i=i+20),s>r&&s>i&&(r=r+20),i>r&&i>s&&(s=s+20);return e="rgb("+r+", "+s+", "+i+")",e}#s(e){if(typeof e!="string"||e.includes("rgb")===!1)throw new Error("The parameter must be a string in rgb format.")}}class c{#e=document.getElementById("start-screen");#t=document.getElementById("difficulty-screen");#r=document.getElementById("game-screen");#i=document.getElementById("game-board");#o=document.getElementById("end-screen");#n=[];#s=[];#l=[];constructor(e){this.themeSwitcher=e}initiateGame(){this.#h(),this.#g(),this.#O(),this.#D()}#h(){const e=document.getElementById("username-input");document.getElementById("username-form").addEventListener("submit",r=>{try{r.preventDefault(),this.#d(e.value),this.#e.classList.add("hidden"),this.#t.classList.remove("hidden"),localStorage.setItem("username",e.value),e.value=""}catch{this.#c(),this.#m()}})}#d(e){if(e==="")throw new Error("Username cannot be empty!")}#c(){document.getElementById("warning")&&document.getElementById("warning").remove()}#m(){const e=document.createElement("p");e.textContent="Username cannot be empty!",e.style.color="crimson",e.id="warning",this.#e.appendChild(e)}#g(){this.#t.addEventListener("click",e=>{const t=e.target.id;t==="easy"&&this.#a(3),t==="medium"&&this.#a(4),t==="hard"&&this.#a(5)})}#a(e){this.#t.classList.add("hidden"),this.#r.classList.remove("hidden"),this.#f(e),this.#T()}#f(e){const t=this.#y(e);this.#C(t)}#y(e){const t=[];for(let s=0;s<e/3;s++){const i=this.#E();t.push(...i)}return t.slice(0,e)}#C(e){for(let t=0;t<e.length;t++){const r=this.#p(e[t]);this.#n.push(r),this.#i.appendChild(r)}}#p(e){const t=document.createElement("button");return t.classList.add("tile","disabled"),t.style.backgroundColor=e,t}#E(){const e=[],t=new a,r=this.#b();e.push(r);const s=t.generateAnalogousColorScheme(r);for(let i=0;i<s.length;i++)e.push(s[i]);return e}#b(){const e=new h,t=this.themeSwitcher.getCurrentTheme();if(t==="dark")return e.generateLightColor();if(t==="light")return e.generateDarkColor()}#T(){setTimeout(()=>{this.#s=this.#S(),this.#u(),this.#w(),this.#I(),this.#L(),this.#k(),this.#v()},5e3)}#S(){this.#s=Array.from(this.#n);for(let e=this.#s.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.#s[e],this.#s[t]]=[this.#s[t],this.#s[e]]}return this.#s}#u(){for(;this.#i.firstChild;)this.#i.removeChild(this.#i.firstChild)}#w(){this.#s.forEach(e=>{const t=document.createElement("button");t.classList.add("tile"),t.style.backgroundColor=e.style.backgroundColor,this.#i.appendChild(t)})}#I(){const e=document.querySelector("#game-screen h2");e.textContent="Tiles shuffled!"}#L(){document.getElementById("user-guesses").classList.remove("hidden")}#k(){document.querySelectorAll("#game-board .tile").forEach(e=>{e.addEventListener("click",()=>{const t=document.createElement("button");t.classList.add("tile"),t.style.backgroundColor=e.style.backgroundColor,document.getElementById("guesses").appendChild(t),this.#l.push(t)})})}#v(){document.getElementById("guesses").addEventListener("click",e=>{const t=e.target;t.classList.contains("tile")&&this.#M(t)})}#M(e){const t=this.#l.indexOf(e);this.#l.splice(t,1),e.remove()}#B(){if(!this.#G())return!1;for(let e=0;e<this.#n.length;e++)if(!this.#A(e))return!1;return!0}#G(){return this.#n.length===this.#l.length}#A(e){return this.#n[e].style.backgroundColor===this.#l[e].style.backgroundColor}#O(){document.getElementById("game-submit").addEventListener("click",()=>{this.#r.classList.add("hidden"),this.#o.classList.remove("hidden"),this.#x()})}#x(){const e=document.querySelector("#end-screen h2"),t=localStorage.getItem("username");this.#B()?e.textContent=`Congratulations ${t}! You won!`:e.textContent=`Sorry ${t}, you lost!`}#D(){document.getElementById("play-again").addEventListener("click",()=>{this.#u(),this.#U(),this.#F(),this.#N(),this.#P(),this.#c()})}#U(){this.#n=[]}#F(){const e=document.getElementById("guesses");for(;e.firstChild;)e.removeChild(e.firstChild)}#N(){this.#l=[]}#P(){const e=document.querySelector("#game-screen h2");e.textContent="Shuffling tiles...",document.getElementById("user-guesses").classList.add("hidden"),this.#o.classList.add("hidden"),this.#e.classList.remove("hidden")}}class u{#e="dark";#t=!1;constructor(){this.#r()}getCurrentTheme(){return this.#e}#r(){document.querySelector(".theme-switcher").addEventListener("click",()=>{this.#t||(this.#t=!0,this.#i(),setTimeout(()=>this.#t=!1,100))})}#i(){this.#e==="dark"?this.#o():this.#n()}#o(){this.#e="light",this.#s("#212529","whitesmoke")}#n(){this.#e="dark",this.#s("whitesmoke","#212529")}#s(e,t){document.documentElement.style.setProperty("--light",e),document.documentElement.style.setProperty("--dark",t)}}const d=new u,m=new c(d);m.initiateGame();
